<!--
  ~ Copyright (c) 2018-2025 Porsche Informatik. All Rights Reserved.
  ~ This software is released under MIT license.
  ~ The full license information can be found in LICENSE in the root directory of this project.
  -->

<div
  class="clr-tt-node-content treetable-row"
  [class.clr-row-clickable]="showClickClass()"
  [class.treetable-selected]="isSelected()"
  (click)="onRowClick($event)"
>
  @if (showSelection()) {
  <clr-tt-row-checkbox
    [clrTtSelectionState]="clrTtItem().selected()"
    (clrTtSelectionStateChange)="toggleSelection($event)"
    (click)="$event.stopPropagation()"
  >
  </clr-tt-row-checkbox>
  }

  <ng-content select="clr-tt-action-overflow" />

  @if (showActionOverflow() && showEmptyActionOverflow()) {
  <clr-tt-action-overflow [empty]="true" />
  }

  <div class="treetable-scrolling-cells">
    @if (clrExpandable()) {
    <div class="treetable-expandable-caret">
      <button
        type="button"
        class="treetable-expandable-caret-button"
        data-testId="clrTtRowCaret"
        (click)="onCaretClick()"
      >
        <cds-icon
          shape="angle"
          [attr.direction]="clrExpanded() ? 'down' : 'right'"
          class="treetable-expandable-caret-icon"
        ></cds-icon>
      </button>
    </div>
    }

    <ng-content select="clr-tt-cell" />
  </div>
</div>

<div
  class="treetable-children-container"
  data-testId="clrTtRowChildContainer"
  [class.expanded]="clrExpanded()"
  [class.collapsed]="!clrExpanded()"
  [class.animate]="shouldAnimate()"
>
  @if (isRecursionMode()) {
  <clr-tt-recursive-rows [parent]="clrTtItem()" />
  } @else {
  <ng-content select="clr-tt-row" />
  }
</div>
